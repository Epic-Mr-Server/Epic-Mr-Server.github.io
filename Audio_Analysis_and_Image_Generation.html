<!doctype html>
<!--Quite a few clients strip your Doctype out, and some even apply their own. Many clients do honor your doctype and it can make things much easier if you can validate constantly against a Doctype.-->
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Aanalysis and Image Generation</title>

<!-- Please use an inliner tool to convert all CSS to inline as inpage or external CSS is removed by email clients -->
<!-- important in CSS is used to prevent the styles of currently inline CSS from overriding the ones mentioned in media queries when corresponding screen sizes are encountered -->

<style type="text/css">
body {
	margin: 0;
}
body, table, td, p, a, li, blockquote {
	-webkit-text-size-adjust: none!important;
	font-family: sans-serif;
	font-style: normal;
	font-weight: 400;
}
button {
	width: 90%;
}

@media screen and (max-width:600px) {
/*styling for objects with screen size less than 600px; */
body, table, td, p, a, li, blockquote {
	-webkit-text-size-adjust: none!important;
	font-family: sans-serif;
}
table {
	/* All tables are 100% width */
	width: 100%;
}
.footer {
	/* Footer has 2 columns each of 48% width */
	height: auto !important;
	max-width: 48% !important;
	width: 48% !important;
}
table.responsiveImage {
	/* Container for images in catalog */
	height: auto !important;
	max-width: 30% !important;
	width: 30% !important;
}
table.responsiveContent {
	/* Content that accompanies the content in the catalog */
	height: auto !important;
	max-width: 66% !important;
	width: 66% !important;
}
.top {
	/* Each Columnar table in the header */
	height: auto !important;
	max-width: 48% !important;
	width: 48% !important;
}
.catalog {
	margin-left: 0%!important;
}
}

@media screen and (max-width:480px) {
/*styling for objects with screen size less than 480px; */
body, table, td, p, a, li, blockquote {
	-webkit-text-size-adjust: none!important;
	font-family: sans-serif;
}
table {
	/* All tables are 100% width */
	width: 100% !important;
	border-style: none !important;
}
.footer {
	/* Each footer column in this case should occupy 96% width  and 4% is allowed for email client padding*/
	height: auto !important;
	max-width: 96% !important;
	width: 96% !important;
}
.table.responsiveImage {
	/* Container for each image now specifying full width */
	height: auto !important;
	max-width: 96% !important;
	width: 96% !important;
}
.table.responsiveContent {
	/* Content in catalog  occupying full width of cell */
	height: auto !important;
	max-width: 96% !important;
	width: 96% !important;
}
.top {
	/* Header columns occupying full width */
	height: auto !important;
	max-width: 100% !important;
	width: 100% !important;
}
.catalog {
	margin-left: 0%!important;
}
button {
	width: 90%!important;
}
}
</style>
</head>
<body yahoo="yahoo">

<table width="100%"  cellspacing="0" cellpadding="0">
  <tbody>
    <tr>
      <td><table width="600"  align="center" cellpadding="0" cellspacing="0">
          <!-- Main Wrapper Table with initial width set to 60opx -->
          <tbody>
            <tr>
              <td><table bgcolor="#d0cfcf" class="top" width="48%"  align="left" cellpadding="0" cellspacing="0" style="padding:10px 10px 10px 10px;">
                  <!-- First header column with Logo -->
                  <tbody>
                    <tr>
						
                      <td style="text-align: center;"><a href="index.html" style="text-decoration:none; font-size: 12px; color:#929292; text-align: center; font-family: sans-serif;">Home!</a></td>
                    </tr>
                  </tbody>
                </table>
                <table bgcolor="#d0cfcf" class="top" width="48%"  align="left" cellpadding="0" cellspacing="0" style="padding:10px 10px 10px 10px; text-align:left">
                  <!-- Second header column with ISSUE|DATE -->
                  <tbody>
                    <tr>
                      <td style="text-align: center;"><a href="about.html" style="text-decoration:none; font-size: 12px; color:#929292; text-align: left; font-family: sans-serif;">About</a></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr> 
              <!-- HTML Spacer row -->
              <td style="font-size: 0; line-height: 0;" height="20"><table width="96%" align="left"  cellpadding="0" cellspacing="0">
                  <tr>
                    <td style="font-size: 0; line-height: 0;" height="20">&nbsp;</td>
                  </tr>
                </table></td>
            </tr>
            <tr> 
              <!-- HTML IMAGE SPACER -->
              <td style="font-size: 0; line-height: 0;" height="20"><table align="left"  cellpadding="0" cellspacing="0" >
                  <tr>
                    <td >&nbsp;</td>
                  </tr>
                </table></td>
            </tr>
            <tr> 
              <!-- Introduction area -->
              <td><table width="96%"  align="left" cellpadding="0" cellspacing="0">
                  <tr> 
                    <!-- row container for TITLE/EMAIL THEME -->
                    <td align="Left" style="font-size: 29px; font-weight: 300; line-height: 2.5em; color: #929292; font-family: sans-serif;"><strong>Audio Analysis and Image Generation </strong></td>
                  </tr>
                  <tr> 
                    <!-- row container for Tagline -->
                    <td align="Left" style="font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;">&nbsp;Date: ? </td>
                  </tr>
				  <tr> 
                    <!-- row container for Tagline -->
                    <td align="Left" style="font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;">&nbsp;Type: Machine Learning and Computer Science </td>
                  </tr>
                  <tr>
                    <td style="font-size: 0; line-height: 0;" height="20"><table width="96%" align="left"  cellpadding="0" cellspacing="0">
                        <tr> 
                          <!-- HTML Spacer row -->
                          <td style="font-size: 0; line-height: 0;" height="20">&nbsp;</td>
                        </tr>
                      </table></td>
                  </tr>
                  <tr> 
                    <!-- Row container for Intro/ Description -->
                    <td align="left" style="font-size: 14px; font-style: normal; font-weight: 100; color: #929292; line-height: 1.8; text-align:justify; padding:10px 20px 0px 20px; font-family: sans-serif;"></td>
                  </tr>
                </table></td>
            </tr>
	
			   <tr> 
                    <!-- row container for Tagline -->
                    <td align="Left" style="padding:20px 0px 0px 5px; font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;"><strong>Basic Explanation&nbsp;&nbsp;</strong></td>
            </tr>
            <tr> 
              <!-- HTML Spacer row -->
              <td style="font-size: 16; line-height: 1.6;" height="10"><table width="96%" align="left"  cellpadding="0" cellspacing="0">
                  <tr>
                   		<td align="Left" style="padding:20px 0px 0px 5px; font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;"><p>This post is a collection of experiments I have done with audio analysis.</p>
							
						<p><strong>Midi Files</strong></p>
							
						<p>Midi files are unique to other file types. Midi files store what notes are played as well as how long they are played. Midi files, unlike other files, have the unique ability to be converted into images that depict what notes are being played at a given time. This allows for the possibility to train a Machine Learning model on these images to make music. This however is incredibly difficult and is currently a problem I’m experimenting with right now!</p>
							
							


			<p>So far, I have created an algorithm to read these files and convert them into image files that could be read by a computer. Below are some Midi Files converted into images by some software I wrote:
			</p>
							
</td>
                  </tr>
				  <tr>
				  
					  <td><table>
						  <tr>
				  			<td><img src= "images/F00001.png" height="250" width="300"></td>
				  			<td><img src= "images/F00002.png" height="250" width="300"></td>
				  
				  
				  
				 		 </tr>
						  </table></td>
				  </tr>
				  <tr>
					  
					  <td><audio controls>


Your browser does not support the audio element.
</audio></td>
					  
					  
				  </tr>
				  
				  <tr> 
              <!-- HTML Spacer row -->
              <td style="font-size: 16; line-height: 1.6;" height="10"><table width="96%" align="left"  cellpadding="0" cellspacing="0">
                  <tr>
                   		<td align="Left" style="padding:20px 0px 0px 5px; font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;">
							
						<p><strong>Audio Imaging</strong></p>
							
						<p>One of my all time favorite math equations is an equation called the Fourier Transform. The Fourier Transform takes in any sound wave and breaks it apart into individual frequencies. This is very useful for audio processing which uses this formula in autotune software for example. For me however, I took a different route and experimented with creating images from these frequencies.</p>
							
						<p>While writing the software for it, I came across an experiment that yielded super interesting results by substituting in trig functions to create our “sound wave” for analysis. This software can draw interesting shapes from these functions. Below is this software implemented right into the website. By changing the variables below, you can draw different shapes. </p>
							
						
							
					</td>
                  </tr>
				  <tr>
					  <td><table align="Left" style="font-size: 16; line-height: 1.6; padding:0px 0px 0px 5px; font-size: 16px; font-weight:1000; color: #929292; font-family: sans-serif;">
						  
						  <tr>
						  
						  	<td><strong>Web Version: </strong></td>
							
						  
						  
						  </tr>
						  <tr>
						  
						  
						  	<td><p>Typically numbers between 0 and 0.5 produce the best results.</p></td>
						  
						  </tr>
						   <tr>
						  
						  
						  	<td><p>Some of my favorites are:</p></td>
						  
						  </tr>
						   <tr>
						  
						  
						  	<td><strong>1. </strong>Frequency 1: 0.1,&nbsp; &nbsp; &nbsp;Frequency 2: 0.3,&nbsp; &nbsp; &nbsp;Trig 1: Sin,&nbsp; &nbsp; &nbsp;Trig 2: Sin</td>
						  
						  </tr>
						  <tr>
						  
						  
						  	<td><strong>2. </strong>Frequency 1: 0.2,&nbsp; &nbsp; &nbsp;Frequency 2: 0.1,&nbsp; &nbsp; &nbsp; Trig 1: Sin,&nbsp; &nbsp; &nbsp;Trig 2: Cos</td>
						  
						  </tr>
						  <tr>
						  
						  
						  	<td><strong>3. </strong>Frequency 1: 0.1,&nbsp; &nbsp; &nbsp;Frequency 2: 0.1,&nbsp; &nbsp; &nbsp; Trig 1: Tan,&nbsp; &nbsp; &nbsp;Trig 2: Tan</td>
						  
						  </tr>
						  <tr>
						  
						  
						  	<td><strong>4. </strong>Frequency 1: 0.1,&nbsp; &nbsp; &nbsp;Frequency 2: 0.05,&nbsp; &nbsp; &nbsp; Trig 1: Sin,&nbsp; &nbsp; &nbsp; Trig 2: Sin</td>
						  
						  </tr>
						  
						  <tr>
						  
						  
						  	<td><p>Frequency 1: </p><input style="border: solid 1px black;" id="freq1"></td>
							<td><p>Frequency 2: </p><input style="border: solid 1px black;"id="freq2"></td>
						  </tr>
						  <tr>
							  <td><p>Trig Function 1: </p><select id="trig1">
								  
								  <option style="border: solid 1px black;" value="Sin">Sin</option>
								  <option style="border: solid 1px black;" value="Cos">Cos</option>
								  <option style="border: solid 1px black;" value="Tan">Tan</option>
								  
								  </select></td>
							  <td><p>Trig Function 2: </p><select id="trig2">
								  
								  <option style="border: solid 1px black;" value="Sin">Sin</option>
								  <option style="border: solid 1px black;" value="Cos">Cos</option>
								  <option style="border: solid 1px black;" value="Tan">Tan</option>
								  
								  </select></td>
						  
						  </tr>
						  <tr>
						  
							  <td><p> </p><button style="padding: 10px; background-color: #7FCD58; font-size: 18px;" onClick="startGame()">Run!</button></td>
						  
						  </tr>
						  
				
						   
						  
						  
						  
						  
						  
						  </table></td>
					  
					  	  <tr>
						  
						  	<td><canvas style="border: solid 4px black" id="main" width="1000", height="500"></canvas></td>
						  
						  
						  </tr>
					  	
</tr>
				 
				  
				 
			  
			  
				  
				
                </table></td>
            </tr>
			  
			  
			
			  </tr>
			  
			  
			  
			 
			 
			  
			  
			 
<!-- SPLIT -->
	  
	  		
	  <!-- SPLIT -->
	  
	  	
  </tbody>
</table>
	
<script type="text/javascript">
	
	

var line = [];
var line2 = [];
	
var Wave = [];
var Wave2 = [];
	
var canvas;
var ctx;
	

var L2OXOffset = -200;
var L2OYOffset = 200;
	
var L1OXOffset = -200;
var L1OYOffset = 0;
	
var freq1 = 0.1;
var freq2 = 0.1;
var trig1 = "Sin";
var trig2 = "Sin";

var firstStart = true;

	
var starter;

var notStarted = true;

function startGame() {
	
	track = 0;
	
	Wave = [];
	Wave2 = [];
	
	line = [];
	line2 = [];
	
	waveImageX = [];
	waveImageY = [];
    
	
	freq1 = parseFloat(document.getElementById("freq1").value);
	freq2 = parseFloat(document.getElementById("freq2").value);
	
	trig1 = document.getElementById("trig1").value;
	trig2 = document.getElementById("trig2").value;
	var on = -1;
	
	let t = -1;
	var ex = 0;
	var n = 0;
	for (u = 0; u < 99; u++) {
		
		/*if (u % 3 == 0) {
			on++;
		}
		if (on % 2 == 0) {
			Wave.push(100);
		}
		else {
			Wave.push(-100);
		}
		*/
		
		/*if (u % 25 == 0) {
			on++;
		}
	    if (on == 0) {
			Wave.push((10 - u) * 10);
			ex = 10 - u;
		}
		else if (on == 1) {
			Wave.push((ex * 10));
			
		}
		else if (on == 2) {
			t++;
			Wave.push((t + ex) * 10);
			n = t + ex;
		}
		else {
			Wave.push(n * 10);
		} 
		*/
		
		var val = Math.sin(u * freq1) * 100;
		
		if (trig1 === "Cos") {
			
			val = Math.cos(u * freq1) * 100;
		
		}
		if (trig1 === "Tan") {
			
			val = Math.tan(u * freq1) * 100;
		
		}
		
		
		
		Wave.push(val);
		
		
		
		
	}
	
	
	console.log(Wave);
	
	on = -1;
	
	t = -1;
    ex = 0;
	n = 0;
	var b = 0;
	for (u = 0; u < 100; u++) {
		
		/*if (u % 3 == 0) {
			on++;
		}
		if (on % 2 == 0) {
			Wave.push(100);
		}
		else {
			Wave.push(-100);
		}
		*/
		
		/*if (u % 25 == 0) {
			on++;
		}
	    if (on == 0) {
			Wave2.push(ex * 1);
			;
		}
		else if (on == 1) {
			t++;
			Wave2.push((ex + t) * 1);
			n = ex + t;
			
		}
		else if (on == 2) {
			Wave2.push(n * 1);
			
			
		}
		else {
			b++;
			Wave2.push((n - b) * 1);
			
		} */
		
		var val = Math.sin(u * freq2) * 100;
		
		if (trig2 === "Cos") {
			
			val = Math.cos(u * freq2) * 100;
		
		}
		if (trig2 === "Tan") {
			
			val = Math.tan(u * freq2) * 100;
		
		}
		
		
		
		Wave2.push(val);
		
		
		
		
		
		
		
	}
	
	console.log(Wave2);
	
	
	var freq = 0;
	
	var coolio = dft(Wave);
	
	let XCOOL = 0;
	let YCOOL = 0;
	let PXCOOL = 0;
	let PYCOOL = 0;
	for (i = 0; i < coolio.length; i++) {
		
		var cool = false;
		
		if (i == 0) {
			cool = true;
		}
		
		
		freq++;
		
		PXCOOL = XCOOL;
		PYCOOL = YCOOL;
		
		var multiplier = 1;
		
		XCOOL += coolio[i].Amp * Math.cos(coolio[i].Phase);
		YCOOL += coolio[i].Amp * Math.sin(coolio[i].Phase);
	
		if (i % 2 == 0) {
			multiplier = 1;
		}
		else {
			multiplier = -1;
		}
		
		
		line.push(new Line(PXCOOL + L1OXOffset, PYCOOL + L1OYOffset, XCOOL + L1OXOffset, YCOOL + L1OYOffset, multiplier * coolio[i].freq, coolio[i].Amp, cool));	
		
		
	}
	
	
    freq = 0;
	
	coolio = dft(Wave2);
	
	XCOOL = 0;
	YCOOL = 0;
	PXCOOL = 0;
	PYCOOL = 0;
	for (i = 0; i < coolio.length; i++) {
		
		var cool = false;
		
		
		
		
		freq++;
		
		PXCOOL = XCOOL;
		PYCOOL = YCOOL;
		
		var multiplier = 1;
		
		XCOOL += coolio[i].Amp * Math.cos(coolio[i].Phase);
		YCOOL += coolio[i].Amp * Math.sin(coolio[i].Phase);
	
		if (i % 2 == 0) {
			multiplier = 1;
		}
		else {
			multiplier = -1;
		}
		
		
		line2.push(new Line(PXCOOL + L2OXOffset, PYCOOL + L1OYOffset, XCOOL + L1OXOffset, YCOOL + L1OYOffset, multiplier * coolio[i].freq, coolio[i].Amp, cool));	
		
		
	}
	
	
	console.log(line);
	console.log(line2);
	
	if (firstStart)
	 {
		 
		 canvas = document.getElementById("main");
		ctx = canvas.getContext("2d");
		 
		 
		 
		 
	 }
	
	clear();
	
	
	if (notStarted) {
		
		notStarted = false;
		starter = setInterval(speed, 10);
		
	}
	
    
}
	
function speed() {
	
	
	for (let i = 0; i < 2; i++) {
		
		
		updateGameArea();
		
	}
	
	
}


function dft(array) {
	
	let final = [];
	
	const N = array.length;
	
	for (k = 0; k < N; k++) {
		let Real = 0;
		let Imaginary = 0;
		for (n = 0; n < N; n++) {
			let phi = (((Math.PI * 2) * k * n) / N);
			Real += array[n] * Math.cos(phi);
			Imaginary -= array[n] * Math.sin(phi);
			
		}
		
		let RealFinal = Real / N;
		let ImaginaryFinal = Imaginary / N;
		
		
		var freq = k;
		var Amp = Math.sqrt(RealFinal * RealFinal + ImaginaryFinal * ImaginaryFinal);
		var Phase = Math.atan2(ImaginaryFinal, RealFinal);
		
		
		
		final[k] = { RealFinal, ImaginaryFinal, freq, Amp, Phase};
		
		
		
	}
	
	
	
	return final;
}	
	





var isComplete = false;
	
function Line(x1, y1, x2, y2, frequency, amplitude, isFirst) {
    this.X1 = x1;
    this.Y1 = y1;
    this.X2 = x2;
    this.Y2 = y2;
	
	
	this.frequency = frequency;
	this.amplitute = amplitude;
	
	var tx = 300;
	var ty = 250;
	var vx = 0.01;
	var vy = 0.01;
	
	
	
	
	
    
    this.update = function(){
		
		

		
		if (isFirst == true && firstStart) {

			ctx.translate(tx, ty);
			firstStart = false;
		}
        
		tx = 0;
		ty = 0;
		

		
        ctx.beginPath();
		ctx.moveTo(this.X1, this.Y1);
		ctx.lineTo(this.X2, this.Y2);
		
		
		ctx.stroke();
		
		
			
		
		
		
		
		
    }
}

function WeelCalculations(frequency, amplitude, x, y) {
	
	
	var first = frequency * Math.PI * track;
	var Real = Math.cos(first);
	var Imaginary = Math.sin(first);
	
	var actualAmp = amplitude * 1;
	return [(Real * actualAmp) + x, (Imaginary * actualAmp) + y];
	
	
	
}
	

	
	

var track = 0;
var waveImageX = [0];
var waveImageY = [0];
	
	
function clear() {
	
	
	ctx.clearRect(-1000, -1000, 2000, 2000);
	
}

function updateGameArea() {
    clear();
	
	
	
	track += (1 / (Math.abs(line2[line2.length - 1].frequency) * 1)) * .1;
	
	if (track > 2) {
		track = 0;
		clearInterval(starter);
		notStarted = true;
		
	}
	
	//e^pi*i*x;
	
	
	
	var lx = 0;
	var ly = 0;
	for (i = 0; i < line.length - 1; i++) {
		var cool = WeelCalculations(line[i].frequency, line[i].amplitute, lx, ly);
		
		
		line[i].X1 = lx + L1OXOffset;
		line[i].Y1 = ly + L1OYOffset;
		
		line[i].X2 = cool[0] + L1OXOffset;
		line[i].Y2 = cool[1] + L1OYOffset;
		
		line[i].update();
		
		
		
		lx = cool[0];
		ly = cool[1];
		
		
		
		
		
		
		
	}
	
	
	
	
	ctx.beginPath();
	ctx.moveTo(lx + L1OXOffset, ly + L1OYOffset);
	ctx.lineTo(650, ly + L1OYOffset);
	ctx.stroke();
	
	waveImageY.push(ly + L1OYOffset);
	
	
	
	lx = 0;
	ly = 0;
	for (i = 0; i < line2.length - 1; i++) {
		var cool = WeelCalculations(line2[i].frequency, line2[i].amplitute, lx, ly);
		
		
		line2[i].Y1 = lx + L2OXOffset;
		line2[i].X1 = ly + L2OYOffset;
		
		line2[i].Y2 = cool[0] + L2OXOffset;
		line2[i].X2 = cool[1] + L2OYOffset;
		
		line2[i].update();
		
		
		
		lx = cool[0];
		ly = cool[1];
		
		
		
		
		
		
		
	}
	
	
	
	
	
	ctx.beginPath();
	ctx.moveTo(ly + L2OYOffset, lx + L2OXOffset);
	ctx.lineTo(ly + L2OYOffset, 200);
	ctx.stroke();
	
	
	
	waveImageX.push(ly + L2OYOffset);
	
	
	if (waveImageX.length > 10000) {
		waveImageX.shift();
		waveImageY.shift();
		
	}
	
	
	for (i = 1; i < waveImageX.length; i++) {
		ctx.beginPath();
		ctx.moveTo(waveImageX[i - 1], waveImageY[i - 1]);
		ctx.lineTo(waveImageX[i], waveImageY[i]);
		ctx.stroke();
	}

	
	
	

		
	
	
}
	
	
	</script>



</body>
</html>


